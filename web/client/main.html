<head>
  <title>FinneyVote</title>
</head>

<body>
  <div class="btmpad">
    {{> register}}{{> claim}}{{> balance}}
  </div>
  <div id="withoutweb3">
  </div>
  <div id="withoutaccount">
  </div>
  {{> propose}}
  {{> feed}}
</body>
<template name="register">
  {{#if registered}}
    <span class="done">Registered!</span>{{/if}}<a class="btn submit {{#unless canDeregister}}disabled{{/unless}}">{{#if registered}}Deregister{{else}}{{#if registering}}Registering{{else}}Register{{/if}}{{/if}}</a> 
</template>
<template name="claim">
  {{#if available}}<a class="btn{{#if shouldClaim}} submit{{/if}}{{#if cannotClaim}} disabled{{/if}}">{{#if claiming}}Claiming{{else}}Claim {{available}} FinneyVotes!{{/if}}</a>{{else}}<span class="done">Claimed!</span>{{/if}}
</template>
<template name="balance">
<span class="done">{{balance}} FV{{#if finney}}, {{finney}} finney{{/if}}</span>
</template>
<template name="propose">
  <div class="dt">
    <textarea id="propose" class="h100" placeholder="Propose something controversial
Earn 0.5 FV per case"></textarea>
    <a class="btn submit h100 ap">Propose<div class="cost">{{gasCost}}</div></a>
  </div>
</template>
<template name="feed">
  {{#unless noRender}}
    {{> feeditem index=lastIndex}}
  {{/unless}}
</template>

<template name="feeditem">
    {{> proposal index=index}}
    {{#if hasNext}}
        {{> feeditem index=next}}
    {{/if}}
</template>

<template name="proposal">
  <div class="dt">
    <div id="{{addressId}}" class="h100">
      <p class="vc">
        {{voteCount}}
      </p>
      <p class="ac">
        {{argumentCount}}
      </p>
    </div>
    <div class="ib">
      <h2 class="prop inline">{{proposal}}</h2>
      {{> Template.dynamic template=page data=data}}
    </div>
  </div>
</template>
<template name="voted">
  <div class="case dt">
    <p class="h100">You voted</p><pre id="arg{{vote.index}}" class="pos{{vote.position}} h100">{{vote.text}}</pre>
      <a class="btn reset h100">Change</a>
  </div>
</template>
<template name="positions">
  <ul class="pos">
    <li class="pos1">Approve</li>
    <li class="pos2">Amend</li>
    <li class="pos3">LOL</li>
    <li class="pos4">Reject</li>
    <li class="pos0">Skip</li>
  </ul>
  <p class="instr">
    Determine your position on the topic.
  </p>
</template>
<template name="cases">
{{#if skip}}
  <div class="pos">
    Skipped! <a class="btn reset">Reset</a>
  </div>
{{else}}
  {{#if hasChoice}}
    <li class="case dt">
      <p class="h100">You chose</p><pre id="arg{{choice.index}}" class="pos{{choice.position}} h100">{{choice.text}}</pre><a class='pos{{choice.position}} vote h100 btn{{#if cannotVote}} disabled{{/if}}'>{{#if voting}}Voting{{else}}Vote{{/if}}</a>
      <a class="btn reset h100">Reset</a>
    </li>
    {{#if hasOptions}}
      <p class="instr">
        Please consider the following opposing views.
      </p>
    {{/if}}
  {{else}}
    <div class="pos">
      You chose
      <li class="{{position}} inline">
        {{positionName}}
      </li>
      Switch to
      <ul class="inline pos">
      {{#each otherPosition in otherPositions}}
        <li class="{{otherPosition.className}}">{{otherPosition.name}}</li>
      {{/each}}
      </ul>
    </div>
  {{/if}}
  {{#if hasOptions}}
    <p>
      <ul class="cases">
        {{#each case in cases}}
          <li class="case dt">
            <p class="h100">{{case.voteCount}}</p><pre id="arg{{case.index}}" class="pos{{case.position}} h100">{{case.text}}</pre>
          </li>
        {{/each}}
      </ul>
    </p>
  {{/if}}
  {{#unless hasChoice}}
    {{#if hasOptions}}
      <p class="instr">
        Vote with an existing case, or write your own.
      </p>
    {{else}}
      <p class="instr">
        Nobody has a case for this position yet.
      </p>
    {{/if}}
    <div id="custom-arg" class="dt">
      <textarea class="{{position}} case h100" placeholder="Write a succinct case
Earn 0.5 FV per vote"></textarea>
      <a class="{{position}} btn h100{{#if cannotArgue}} disabled{{/if}}">Submit</a>
    </div>
  {{/unless}}
{{/if}}
</template>
